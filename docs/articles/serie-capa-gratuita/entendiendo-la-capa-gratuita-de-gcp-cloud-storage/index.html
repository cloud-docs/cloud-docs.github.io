<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-179564597-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Cloud Storage | Cloud Articles Repo</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Cloud Storage | Cloud Articles Repo"><meta data-react-helmet="true" name="description" content="Serie de artículos que te ayudará a sacar el máximo provecho a Google Cloud sin pagar de más, en esta ocasión veremos Cloud Storage"><meta data-react-helmet="true" property="og:description" content="Serie de artículos que te ayudará a sacar el máximo provecho a Google Cloud sin pagar de más, en esta ocasión veremos Cloud Storage"><meta data-react-helmet="true" name="keywords" content="Google Cloud Platform,Gcp,Cloud,Economy,Billing,Cloud Storage"><meta data-react-helmet="true" property="og:image" content="https://cloud-docs.github.io/./portada.jpeg"><meta data-react-helmet="true" property="twitter:image" content="https://cloud-docs.github.io/./portada.jpeg"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Cloud Storage"><meta data-react-helmet="true" property="og:url" content="https://cloud-docs.github.io/docs/articles/serie-capa-gratuita/entendiendo-la-capa-gratuita-de-gcp-cloud-storage"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://cloud-docs.github.io/docs/articles/serie-capa-gratuita/entendiendo-la-capa-gratuita-de-gcp-cloud-storage"><link rel="stylesheet" href="/styles.36cc8dcc.css">
<link rel="preload" href="/styles.7f684fbb.js" as="script">
<link rel="preload" href="/runtime~main.6a282a29.js" as="script">
<link rel="preload" href="/main.770f0b20.js" as="script">
<link rel="preload" href="/1.d15165e9.js" as="script">
<link rel="preload" href="/2.f263c672.js" as="script">
<link rel="preload" href="/1be78505.b01015e7.js" as="script">
<link rel="preload" href="/c4f5d8e4.aa7079aa.js" as="script">
<link rel="preload" href="/20.fd2ceda9.js" as="script">
<link rel="preload" href="/19.cc8db11a.js" as="script">
<link rel="preload" href="/935f2afb.ed478422.js" as="script">
<link rel="preload" href="/17896441.277ac917.js" as="script">
<link rel="preload" href="/52f30a9e.6a113b8a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="GDG Cloud Santiago"><strong class="navbar__title">GDG Cloud Santiago</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/gdgcloudsantiagoapp/technical-articles" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="GDG Cloud Santiago"><strong class="navbar__title">GDG Cloud Santiago</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/gdgcloudsantiagoapp/technical-articles" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Example</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Style Guide</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Articulos</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Capa Gratuita</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/serie-capa-gratuita/entendiendo-la-capa-gratuita-de-gcp">Entendiendo la capa gratuita de GCP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/serie-capa-gratuita/entendiendo-la-capa-gratuita-de-gcp-cloud-functions">Cloud Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/serie-capa-gratuita/entendiendo-la-capa-gratuita-de-gcp-pub-sub">Cloud Pub/Sub</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/articles/serie-capa-gratuita/entendiendo-la-capa-gratuita-de-gcp-cloud-storage">Cloud Storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/serie-capa-gratuita/entendiendo-la-capa-gratuita-de-gcp-bigquery">Bigquery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/serie-capa-gratuita/entendiendo-la-capa-gratuita-de-gcp-cloud-run">Cloud Run</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/serie-capa-gratuita/vigila-el-uso-de-la-capa-gratuita-desde-data-studio">Vigila la capa gratuita desde Data Studio</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/serie-capa-gratuita/vigila-el-uso-de-la-capa-gratuita-desde-data-studio">Vigila la capa gratuita desde Data Studio</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Arquitecturas</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/architectures/nivelacion-kubernetes">Nivelación Kubernetes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/doc3">This is Document Number 3</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Cloud Storage</h1></header><div class="markdown"><div class="writter"><div class="ilb"><a href="https://miro.medium.com/fit/c/256/256/2*XKiHV-3_LJvO6xeiGKheDQ.png"><img alt="Felipe Velasquez Castro" src="https://miro.medium.com/fit/c/256/256/2*XKiHV-3_LJvO6xeiGKheDQ.png" width="80" height="80"></a></div><div class="ilb"><div><p>Written by</p></div><div><h2>Felipe Velasquez Castro</h2><div></div></div><div><h4>Google Developer Expert</h4></div></div></div><p>Serie de artículos que te ayudará a sacar el máximo provecho a Google Cloud sin pagar de más, en esta ocasión veremos Cloud Storage</p><p>Otro servicio fundamental en toda infraestructura es el de Almacenamiento de archivos, para ello contamos con Google Cloud Storage, este servicios nos brinda múltiples opciones de almacenamiento ya sea a nivel Multi Regional, es decir, tus archivos se replican en múltiples locaciones, lo que mejora el acceso y la disponibilidad ante desastres, Regional, que almacena tus archivos en una sola región, Near Line, que tiene menos costo de almacenamiento con la condición de acceder a tus archivo nos más de una vez al mes y Cold Line, que es el más económico de los tipos de almacenamiento, ya que se espera que accedas a tus archivo máximo una vez al año.</p><p>En la imagen a continuación tienes algunos de los posibles usos de GCS en tus arquitecturas y la posibilidad de integración con otros servicios de Google Cloud Platform</p><p><img src="https://cdn-images-1.medium.com/max/2000/0*-jFmrhVJKTHROTh-.png"></p><p>Hay múltiples formas de ahorrar en el uso de Cloud Storage, entre las principales están, el tener claro la cantidad de GB que serán almacenados cada mes, el nivel de replicación que los archivo tendrán, la cantidad de veces que serán accedidos y el tiempo que duren los archivos almacenados.</p><p>Veamos los costos del servicios, cuales son los límites y qué operaciones incluye la capa gratuita.</p><p><img src="https://cdn-images-1.medium.com/max/2000/0*YZVczMgWp0Gjhz4s.png"></p><p>En lo que respecta a las operaciones, son estas:</p><ul><li><p>Clase A: Añadir objetos y enumerar segmentos y objetos</p></li><li><p>Clase B: Obtener objetos y visualizar metadatos de segmentos y objetos</p></li></ul><p>Otro aspecto a considerar es el uso de la red, ya que si bien podemos almacenar 5GB, sólo tendremos 1GB de salida desde USA gratis.</p><p>Por lo tanto, tenemos 5GB en Storage Regional, lo que es un <strong><em>warning</em></strong> importante ya que los storages se crean automáticamente cómo Múlti Regional, así que cuando crees un Bucket debes usar el siguiente comando para que su uso se considere en la capa gratuita al crearlo solo como Regional. La documentación <a href="https://cloud.google.com/storage/docs/creating-buckets?hl=es-419#storage-create-bucket-gsutil" target="_blank" rel="noopener noreferrer">aquí</a>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gsutil mb -c regional -l us-central1 gs://&lt;BUCKET_NAME&gt;/</span></div></div></div></div></div><p>Otro punto a muy importante es que GCP también crea storages<strong> Multi Regionales</strong> para algunos productos <strong>por defecto</strong>, dentro de los contenidos en la capa gratuita están, App Engine, Cloud Functions, Cloud Build, Cloud container Registry entre otros, estos utilizan storage para almacenar el código que es deployado a estos servicios.</p><p>Esto quiere decir que si utilizas Cloud Run en conjunto a Cloud Container Registry y tus imágenes Docker son muy pesadas, por ejemplo un Debian que pesa finalmente 700 u 800 MB después de una par de versiones de tu imagen Docker tendrás un par de GB que son facturables al ser Multi Regional, para esto re recomiendo que uses imágenes livianas de tipo <a href="https://hub.docker.com/_/alpine" target="_blank" rel="noopener noreferrer">Alpine</a> o <a href="https://hub.docker.com/_/scratch" target="_blank" rel="noopener noreferrer">Scratch</a> con solo los componentes necesarios.</p><p>A modo personal lo que hago es crear <a href="https://cloud.google.com/storage/docs/lifecycle" target="_blank" rel="noopener noreferrer">**life cycles</a>** sobre los storages de App Engine, Cloud Functions y sobre todo Cloud Build (que después de compilar no sirven para nada), para que elimine los archivos automáticamente después de unos días.</p><p>Para crear tus propios life cycles debes primero crear un archivo json con la regla a aplicar.</p><p>lifecycle.json</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;lifecycle&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;rule&quot;: [{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;action&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;type&quot;: &quot;Delete&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;condition&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;age&quot;: 2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;isLive&quot;: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Como puedes ver, esto <em>eliminará todos los archivos después de 2 días</em>. Para aplicar la regla, debes indicar el nombre del storage que desees y ejecutar el siguiente comando</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gsutil lifecycle set lifecycle.json gs://&lt;BUCKET_NAME&gt;/;</span></div></div></div></div></div><p>Otra artimaña que sería fabulosa es la de cambiar la clase del storage, sin embargo nunca me ha resultado, por que no se puede ir de Multi Regional a regional, por que cambia la clase no la ubicación :( , pero por favor haz la prueba por tu cuenta, tal vez ir de Multi Regional a Nearline o Coldline</p><p>Este es un enlace a la <a href="https://cloud.google.com/storage/docs/changing-storage-classes" target="_blank" rel="noopener noreferrer">Documentación</a> y <a href="https://cloud.google.com/storage/docs/changing-default-storage-class" target="_blank" rel="noopener noreferrer">esta</a>;</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gsutil rewrite -s [STORAGE_CLASS] gs://&lt;BUCKET_NAME&gt;/</span></div></div></div></div></div><p>Espero que estos tips te sean de utilidad, y nos vemos en el próximo articulo</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/articles/serie-capa-gratuita/cloud-storage.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/articles/serie-capa-gratuita/entendiendo-la-capa-gratuita-de-gcp-pub-sub"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Cloud Pub/Sub</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/articles/serie-capa-gratuita/entendiendo-la-capa-gratuita-de-gcp-bigquery"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Bigquery »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/doc2/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.7f684fbb.js"></script>
<script src="/runtime~main.6a282a29.js"></script>
<script src="/main.770f0b20.js"></script>
<script src="/1.d15165e9.js"></script>
<script src="/2.f263c672.js"></script>
<script src="/1be78505.b01015e7.js"></script>
<script src="/c4f5d8e4.aa7079aa.js"></script>
<script src="/20.fd2ceda9.js"></script>
<script src="/19.cc8db11a.js"></script>
<script src="/935f2afb.ed478422.js"></script>
<script src="/17896441.277ac917.js"></script>
<script src="/52f30a9e.6a113b8a.js"></script>
</body>
</html>